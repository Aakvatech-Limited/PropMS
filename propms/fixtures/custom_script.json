[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Issue", 
  "modified": "2018-12-27 17:16:50.361484", 
  "name": "Issue-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "cur_frm.add_fetch('person_in_charge', 'employee_name', 'person_in_charge_name');\ncur_frm.set_query(\"person_in_charge\", function() {\n    return {\n        \"filters\": {\n            \"department\": [\"like\", \"Maintenance - %\"]\n        }\n    }\n});\ncur_frm.add_fetch('sub_contractor_contact', 'supplier_name', 'sub_contractor_name');\ncur_frm.set_query(\"sub_contractor_contact\", function() {\n    return {\n        filters: {\n            'supplier_group': 'Sub-Contractor'\n        }\n    }\n});\ncur_frm.fields_dict['materials_required'].grid.get_field('material_request').get_query = function(doc, cdt, cdn) {\n    var child = locals[cdt][cdn]\n    return {\n        filters: [\n            ['Material Request', 'docstatus', '=', '0'],\n            ['Material Request', 'docstatus', '=', '1']\n        ]\n    }\n}\nfrappe.ui.form.on('Issue Materials Detail', {\n    material_request: function(frm, cdt, cdn) {\n        var material = locals[cdt][cdn];\n        if (material.material_request) {\n            frappe.call({\n                \"method\": \"frappe.client.get_value\",\n                \"args\": {\n                    doctype: \"Material Request\",\n                    filters: {\n                        \"name\": material.material_request\n                    },\n                    fieldname: \"status\"\n                },\n                callback: function(r) {\n                    frappe.model.set_value(cdt, cdn, \"material_status\", r.message.status);\n                }\n            });\n        }\n    }\n})\nfrappe.ui.form.on('Issue', {\n    property_name: function(frm, cdt, cdn) {\n        frappe.model.set_value(cdt, cdn, \"customer\", \"\");\n\tif (frm.doc.property_name) {\n            frappe.call({\n                method: \"frappe.client.get_value\",\n                args: {\n                    doctype: \"Property\",\n                    fieldname: \"status\",\n                    filters: {\n                        name: frm.doc.property_name\n                    },\n                },\n                callback: function(r, rt) {\n                    if (r.message) {\n                        if (r.message.status == \"On lease\") {\n                            frappe.call({\n                                method: \"frappe.client.get_value\",\n                                args: {\n                                    doctype: \"Lease\",\n                                    fieldname: \"customer\",\n                                    filters: {\n                                        property: frm.doc.property_name\n                                    },\n                                },\n                                callback: function(r, rt) {\n                                    if (r.message) {\n                                        frappe.model.set_value(cdt, cdn, \"customer\", r.message.customer);\n                                    }\n                                }\n                            });\n                        }\n                    }\n                }\n            });\n        } else {\n            frappe.model.set_value(cdt, cdn, \"customer\", \"\");\n        }\n    }\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2019-01-07 12:21:29.162252", 
  "name": "Sales Invoice-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "frappe.ui.form.on('Sales Invoice', {\n    property_name: function(frm, cdt, cdn) {\n        frappe.model.set_value(cdt, cdn, \"customer\", \"\");\n\tif (frm.doc.cost_center) {\n            frappe.call({\n                method: \"frappe.client.get_value\",\n                args: {\n                    doctype: \"Property\",\n                    fieldname: \"status\",\n                    filters: {\n                        name: frm.doc.cost_center\n                    },\n                },\n                callback: function(r, rt) {\n                    if (r.message) {\n                        if (r.message.status == \"On lease\") {\n                            frappe.call({\n                                method: \"frappe.client.get_value\",\n                                args: {\n                                    doctype: \"Lease\",\n                                    fieldname: \"customer\",\n                                    filters: {\n                                        property: frm.doc.cost_center\n                                    },\n                                },\n                                callback: function(r, rt) {\n                                    if (r.message) {\n                                        frappe.model.set_value(cdt, cdn, \"customer\", r.message.customer);\n                                    }\n                                }\n                            });\n                        }\n                    }\n                }\n            });\n        } else {\n            frappe.model.set_value(cdt, cdn, \"customer\", \"\");\n        }\n    }\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Journal Entry Account", 
  "modified": "2019-01-07 12:21:16.799713", 
  "name": "Journal Entry Account-Client", 
  "parent": null, 
  "parentfield": null, 
  "parenttype": null, 
  "script": "frappe.ui.form.on('Journal Entry Account', {\n    property_name: function(frm, cdt, cdn) {\n        frappe.model.set_value(cdt, cdn, \"party\", \"\");\n\tif (frm.doc.cost_center) {\n            frappe.call({\n                method: \"frappe.client.get_value\",\n                args: {\n                    doctype: \"Property\",\n                    fieldname: \"status\",\n                    filters: {\n                        name: frm.doc.cost_center\n                    },\n                },\n                callback: function(r, rt) {\n                    if (r.message) {\n                        if (r.message.status == \"On lease\") {\n                            frappe.call({\n                                method: \"frappe.client.get_value\",\n                                args: {\n                                    doctype: \"Lease\",\n                                    fieldname: \"customer\",\n                                    filters: {\n                                        property: frm.doc.cost_center\n                                    },\n                                },\n                                callback: function(r, rt) {\n                                    if (r.message) {\n                                        frappe.model.set_value(cdt, cdn, \"party\", r.message.customer);\n                                    }\n                                }\n                            });\n                        }\n                    }\n                }\n            });\n        } else {\n            frappe.model.set_value(cdt, cdn, \"party\", \"\");\n        }\n    }\n})", 
  "script_type": "Client"
 }
]