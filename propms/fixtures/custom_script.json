[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Issue", 
  "modified": "2018-12-01 21:23:54.406329", 
  "name": "Issue-Client", 
  "script": "cur_frm.add_fetch('person_in_charge', 'employee_name', 'person_in_charge_name');\n\ncur_frm.set_query(\"person_in_charge\", function () {\n    return{\n        filters: { 'Department':'Maintenance - PrpMS'}\n    }\n});\n\n\ncur_frm.add_fetch('sub_contractor_contact', 'supplier_name', 'sub_contractor_name');\n\ncur_frm.set_query(\"sub_contractor_contact\", function () {\n    return{\n        filters: { 'supplier_group':'Sub-Contractor'}\n    }\n});\n\ncur_frm.fields_dict['materials_required'].grid.get_field('material_request').get_query = function(doc,cdt,cdn) {\nvar child=locals[cdt][cdn]\n        return {\n            filters: [[\n               'Material Request', 'docstatus', '=', '0'\n            ],\n            [\n               'Material Request', 'docstatus', '=', '1'\n            ]]\n        }\n}\n\nfrappe.ui.form.on('Issue Materials Detail', {\n    material_request:function(frm,cdt,cdn){\n        var material=locals[cdt][cdn];\n            if(material.material_request){\n                   frappe.call({\n                     \"method\": \"frappe.client.get_value\",\n                     \"args\": { doctype: \"Material Request\", filters: {\"name\":material.material_request} ,fieldname:\"status\"}, \n                    callback: function(r) { \n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"material_status\",r.message.status);\n\t\t\t\t\n\t\t\t}\n\t\t});\n      }\n    }\n})\n\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Daily Checklist", 
  "modified": "2018-11-30 16:25:26.872763", 
  "name": "Daily Checklist-Client", 
  "script": "frappe.ui.form.on('Daily Checklist', 'area', function(frm,cdt,cdn){\n            var doc=locals[cdt][cdn];\n            if(doc.area){\n    \t\tfrappe.call({\n            method: \"frappe.client.get\",\n            args: {\n                name:doc.area,\n                doctype: \"Checklist Checkup Area\"\n            },\n            callback(r) {\n                console.log(r);\n                if(r.message){\n                     for (var row in r.message.task) {\n                         \n                         var child = frm.add_child(\"daily_checklist_detail\");\n\n                        frappe.model.set_value(child.doctype, child.name, \"checklist_task\", r.message.task[row].task_name);\n                        refresh_field(\"daily_checklist_detail\");\n                     }\n                }\n                \n            }\n            \n    \t\t})\n            }\n    \n    \n    \n    \n})\n\ncur_frm.fields_dict['daily_checklist_detail'].grid.get_field('job_card').get_query = function(doc,cdt,cdn) {\nvar child=locals[cdt][cdn]\n        return {\n            filters: [[\n               'Issue', 'docstatus', '=', '0'\n            ],\n            [\n               'Issue', 'docstatus', '=', '1'\n            ]]\n        }\n    };\n\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Key Set Detail", 
  "modified": "2018-12-19 17:52:20.610111", 
  "name": "Key Set Detail-Client", 
  "script": "frappe.ui.form.on(\"Key Set Detail\", \"returned\", function(frm) {\n    if ( cur_frm.doc.returned ) cur_frm.set_value(\"return_date_and_time\", frappe.datetime.now_datetime());\n    else {\n        cur_frm.set_value(\"return_date_and_time\", \"\");\n    }\n        \n});", 
  "script_type": "Client"
 }
]